---
import Layout from '../layouts/Layout.astro';
import Logo from '../components/Logo.astro';
import CartDrawer from '../components/CartDrawer.astro';
import AddToCart from '../components/AddToCart.astro';
---

<Layout title="SESSR | Premium Cellular Longevity & Bio-tech Skincare">
	<div class="noise-overlay"></div>

    <nav>
        <div class="logo">
            <Logo height="50px" />
        </div>
        <ul class="nav-links">
            <li><a href="#science">SCIENCE</a></li>
            <li><a href="#product">THE PROTECTOR</a></li>
        </ul>
        <div class="nav-meta">
            <button id="cart-trigger" class="cart-btn">CART <span id="header-cart-count">(0)</span></button>
        </div>
    </nav>

    <main>
        <section class="hero" id="home">
            <div class="hero-content">
                <span class="eyebrow">MOLECULAR PROTECTION SINCE 1973</span>
                <h1>THE SHIELD FOR<br><span class="italic">DIGITAL LIVES.</span></h1>
                <p>We’ve been the silent innovators behind world-class brands since 1973. Now, we bring you the ultimate protector against the blue light age.</p>
                <div class="hero-actions">
                    <button class="cta-button primary">GET THE SHIELD</button>
                    <button class="cta-button secondary">THE SCIENCE</button>
                </div>
            </div>
            <div class="hero-visual">
                <div class="visual-container">
                    <div class="droplet-container">
                        <div class="droplet"></div>
                        <div class="droplet-glow"></div>
                    </div>
                </div>
            </div>
            <div class="scroll-indicator">
                <span>SCROLL TO EXPLORE</span>
                <div class="line"></div>
            </div>
        </section>

        <section class="science-bridge" id="science">
            <div class="section-header">
                <span class="eyebrow">THE CORE TECHNOLOGY</span>
                <h2>EXO-TECH™ DELIVERY</h2>
            </div>
            <div class="science-grid">
                <div class="science-content">
                    <p>Our proprietary exosome-based delivery system increases ingredient absorption by 300%. Designed specifically to protect female facial skin from the significant aging caused by smartphone and laptop blue light.</p>
                    <ul class="science-bullets">
                        <li>HEV Light Neutralization</li>
                        <li>Digital Aging Prevention</li>
                        <li>Lipid Barrier Reinforcement</li>
                    </ul>
                </div>
                <div class="science-visual">
                    <div class="exosome-diagram">
                        <div class="core"></div>
                        <div class="ring"></div>
                        <div class="rays"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="collection" id="product">
            <div class="section-header center">
                <span class="eyebrow">THE SIGNATURE MODEL</span>
                <h2>BLUE LIGHT DEFENSE</h2>
            </div>
            <div class="product-grid" style="display: flex; justify-content: center;">
                <!-- Blue Light Defense -->
                <div class="product-card" style="max-width: 400px;">
                    <a href="/product/blue-light-defense" class="product-link">
                        <div class="product-image">
                            <div class="bottle chrome"></div>
                        </div>
                    </a>
                    <div class="product-info">
                        <span class="tag">THE ORIGINAL</span>
                        <a href="/product/blue-light-defense"><h3>BLUE LIGHT DEFENSE</h3></a>
                        <p>A specialized skin moisturizer protector against the blue light from laptops and smartphones.</p>
                        <div class="product-footer">
                            <span class="price">$180.00</span>
                            <AddToCart 
                                id="blue-light-defense" 
                                name="BLUE LIGHT DEFENSE" 
                                price={180} 
                                image="/assets/CREAM_chrome.png"
                            />
                        </div>
                    </div>
                </div>
            </div>
        </section>


    </main>

    <footer>
        <div class="footer-grid">
            <div class="footer-brand">
                <div class="logo">
                    <Logo height="50px" />
                </div>
                <p>Only here you can find real SESSR.</p>
            </div>
            <div class="footer-links">
                <div class="link-group">
                    <h4>PRODUCT</h4>
                    <a href="/product/blue-light-defense">Blue Light Defense</a>
                </div>
                <div class="link-group">
                    <h4>THE BRAND</h4>
                    <a href="#">Our 1973 Story</a>
                    <a href="#">HEV Science</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 SESSR BIOTECH. DEFINING CELLULAR LONGEVITY.</p>
        </div>
    </footer>
    <CartDrawer />
</Layout>

<script>
    import { cartItems, toggleCart } from '../stores/cartStore';

    const cartTrigger = document.getElementById('cart-trigger');
    const headerCount = document.getElementById('header-cart-count');

    cartTrigger?.addEventListener('click', toggleCart);

    cartItems.subscribe(items => {
        const count = Object.values(items).reduce((acc, item) => acc + item.quantity, 0);
        if (headerCount) {
            headerCount.textContent = `(${count})`;
        }
    });
</script>
